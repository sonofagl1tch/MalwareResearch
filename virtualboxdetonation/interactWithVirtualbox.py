##############################################################
# imports
import sys
from sys import platform as _platform
import os
import getpass
import subprocess
##############################################################
# Global variables
############################################################
VM_NAME="windowsxp"
VM_USER="admin"
VM_PASSWD="admin"
VM_SNAPSHOT="readyForMalware"
fileToCopy=""
############################################################
# restore virutalbox image to snapshot
############################################################
def restore():
    #these commands assume vboxmanage is in your path
    #power off VM
    subprocess.call(["VBoxManage", "controlvm", VM_NAME, "poweroff"])
    #restore VM to snapshot
    subprocess.call(["VBoxManage", "snapshot", VM_NAME, "restore", VM_SNAPSHOT])
    #turn on vm
    subprocess.call(["VBoxManage", "startvm", VM_NAME])
############################################################
# copy files to VM
############################################################
def copy():
    #VBoxManage guestcontrol "$inputVMID" cp "$tFile" 'hosts.new' --username Administrator --password *** --verbose
    if "/" in sys.argv[-1]:
        path = sys.argv[-1].split("/")
        fileToCopy = path[-1]
    else:
        fileToCopy = sys.argv[-1]
    subprocess.call(["VBoxMange", "guestcontrol", VM_NAME, fileToCopy, "batman.exe", "--username", VM_USER, "--password", VM_PASSWD, "--verbose"])
    print(fileTOCopy)
    
############################################################
# main
############################################################
#restore()
copy()
